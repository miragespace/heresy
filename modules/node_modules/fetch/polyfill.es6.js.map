{"version":3,"file":"polyfill.es6.js","sources":["../../../js/src/fetch/headers.ts","../../../js/src/utils.ts","../../../js/src/fetch/polyfill.ts"],"sourcesContent":["function normalizeName(name: string | number) {\n  if (typeof name !== \"string\") {\n    name = String(name);\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === \"\") {\n    throw new TypeError(\n      'Invalid character in header field name: \"' + name + '\"'\n    );\n  }\n  return name.toLowerCase();\n}\n\nfunction normalizeValue(value: string | number) {\n  if (typeof value !== \"string\") {\n    value = String(value);\n  }\n  return value;\n}\n\nfunction iteratorFor<T, R>(items: T[]) {\n  var iterator: IterableIterator<R> = {\n    // @ts-ignore\n    next() {\n      var value = items.shift();\n      return { done: value === undefined, value: value };\n    },\n    [Symbol.iterator]() {\n      return iterator;\n    },\n  };\n\n  return iterator;\n}\n\nexport default class Headers {\n  map: Record<string, string> = {};\n\n  constructor(headers: unknown) {\n    if (headers instanceof Headers) {\n      headers.forEach((value, name) => {\n        this.append(name, value);\n      });\n    } else if (Array.isArray(headers)) {\n      headers.forEach((header) => {\n        this.append(header[0], header[1]);\n      });\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach((name: string) => {\n        this.append(name, (headers as any)[name]);\n      });\n    }\n  }\n\n  append(name: string | number, value: string | number) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + \", \" + value : value;\n  }\n\n  delete(name: string | number) {\n    delete this.map[normalizeName(name)];\n  }\n\n  has(name: string | number): boolean {\n    return this.map.hasOwnProperty(normalizeName(name));\n  }\n\n  get(name: string | number): string | null {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null;\n  }\n\n  set(name: string | number, value: string | number) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  }\n\n  forEach(\n    callback: (value: string, key: string, parent?: object) => void,\n    thisArg?: object\n  ) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  }\n\n  keys(): IterableIterator<string> {\n    var items: string[] = [];\n    this.forEach(function (value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items);\n  }\n\n  values(): IterableIterator<string> {\n    var items: string[] = [];\n    this.forEach(function (value) {\n      items.push(value);\n    });\n    return iteratorFor(items);\n  }\n\n  entries(): IterableIterator<[string, string]> {\n    var items: string[][] = [];\n    this.forEach(function (value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items);\n  }\n\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n}\n","/// <reference lib=\"dom\" />\n\nfunction getGlobals() {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else if (typeof globalThis !== \"undefined\") {\n    return globalThis;\n  }\n  return undefined;\n}\n\nexport const globals = getGlobals();\n","import Headers from \"./headers\";\nimport { globals } from \"../utils\";\n\nexport { Headers };\n\nconst m = {\n  Headers,\n};\n\n// Add classes to global scope\nif (typeof globals !== \"undefined\") {\n  for (const prop in m) {\n    if (Object.prototype.hasOwnProperty.call(m, prop)) {\n      Object.defineProperty(globals, prop, {\n        value: m[prop as keyof typeof m],\n        writable: true,\n        configurable: true,\n      });\n    }\n  }\n}\n"],"names":[],"mappings":"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"}