{"version":3,"file":"polyfill.es6.min.js","sources":["../../../js/src/url-search-params/polyfill.js"],"sourcesContent":["/**!\n * url-search-params-polyfill\n *\n * @author Jerry Bendy (https://github.com/jerrybendy)\n * @licence MIT\n */\n(function(self) {\n    'use strict';\n\n    var nativeURLSearchParams = (function() {\n            // #41 Fix issue in RN\n            try {\n                if (self.URLSearchParams && (new self.URLSearchParams('foo=bar')).get('foo') === 'bar') {\n                    return self.URLSearchParams;\n                }\n            } catch (e) {}\n            return null;\n        })(),\n        isSupportObjectConstructor = nativeURLSearchParams && (new nativeURLSearchParams({a: 1})).toString() === 'a=1',\n        // There is a bug in safari 10.1 (and earlier) that incorrectly decodes `%2B` as an empty space and not a plus.\n        decodesPlusesCorrectly = nativeURLSearchParams && (new nativeURLSearchParams('s=%2B').get('s') === '+'),\n        __URLSearchParams__ = \"__URLSearchParams__\",\n        // Fix bug in Edge which cannot encode ' &' correctly\n        encodesAmpersandsCorrectly = nativeURLSearchParams ? (function() {\n            var ampersandTest = new nativeURLSearchParams();\n            ampersandTest.append('s', ' &');\n            return ampersandTest.toString() === 's=+%26';\n        })() : true,\n        prototype = URLSearchParamsPolyfill.prototype,\n        iterable = !!(self.Symbol && self.Symbol.iterator);\n\n    if (nativeURLSearchParams && isSupportObjectConstructor && decodesPlusesCorrectly && encodesAmpersandsCorrectly) {\n        return;\n    }\n\n\n    /**\n     * Make a URLSearchParams instance\n     *\n     * @param {object|string|URLSearchParams} search\n     * @constructor\n     */\n    function URLSearchParamsPolyfill(search) {\n        search = search || \"\";\n\n        // support construct object with another URLSearchParams instance\n        if (search instanceof URLSearchParams || search instanceof URLSearchParamsPolyfill) {\n            search = search.toString();\n        }\n        this [__URLSearchParams__] = parseToDict(search);\n    }\n\n\n    /**\n     * Appends a specified key/value pair as a new search parameter.\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    prototype.append = function(name, value) {\n        appendTo(this [__URLSearchParams__], name, value);\n    };\n\n    /**\n     * Deletes the given search parameter, and its associated value,\n     * from the list of all search parameters.\n     *\n     * @param {string} name\n     */\n    prototype['delete'] = function(name) {\n        delete this [__URLSearchParams__] [name];\n    };\n\n    /**\n     * Returns the first value associated to the given search parameter.\n     *\n     * @param {string} name\n     * @returns {string|null}\n     */\n    prototype.get = function(name) {\n        var dict = this [__URLSearchParams__];\n        return this.has(name) ? dict[name][0] : null;\n    };\n\n    /**\n     * Returns all the values association with a given search parameter.\n     *\n     * @param {string} name\n     * @returns {Array}\n     */\n    prototype.getAll = function(name) {\n        var dict = this [__URLSearchParams__];\n        return this.has(name) ? dict [name].slice(0) : [];\n    };\n\n    /**\n     * Returns a Boolean indicating if such a search parameter exists.\n     *\n     * @param {string} name\n     * @returns {boolean}\n     */\n    prototype.has = function(name) {\n        return hasOwnProperty(this [__URLSearchParams__], name);\n    };\n\n    /**\n     * Sets the value associated to a given search parameter to\n     * the given value. If there were several values, delete the\n     * others.\n     *\n     * @param {string} name\n     * @param {string} value\n     */\n    prototype.set = function set(name, value) {\n        this [__URLSearchParams__][name] = ['' + value];\n    };\n\n    /**\n     * Returns a string containg a query string suitable for use in a URL.\n     *\n     * @returns {string}\n     */\n    prototype.toString = function() {\n        var dict = this[__URLSearchParams__], query = [], i, key, name, value;\n        for (key in dict) {\n            name = encode(key);\n            for (i = 0, value = dict[key]; i < value.length; i++) {\n                query.push(name + '=' + encode(value[i]));\n            }\n        }\n        return query.join('&');\n    };\n\n    // There is a bug in Safari 10.1 and `Proxy`ing it is not enough.\n    var forSureUsePolyfill = !decodesPlusesCorrectly;\n    var useProxy = (!forSureUsePolyfill && nativeURLSearchParams && !isSupportObjectConstructor && self.Proxy);\n    var propValue; \n    if (useProxy) {\n        // Safari 10.0 doesn't support Proxy, so it won't extend URLSearchParams on safari 10.0\n        propValue = new Proxy(nativeURLSearchParams, {\n            construct: function (target, args) {\n                return new target((new URLSearchParamsPolyfill(args[0]).toString()));\n            }\n        })\n        // Chrome <=60 .toString() on a function proxy got error \"Function.prototype.toString is not generic\"\n        propValue.toString = Function.prototype.toString.bind(URLSearchParamsPolyfill);\n    } else {\n        propValue = URLSearchParamsPolyfill;\n    }\n    /*\n     * Apply polifill to global object and append other prototype into it\n     */\n    Object.defineProperty(self, 'URLSearchParams', {\n        value: propValue\n    });\n\n    var USPProto = self.URLSearchParams.prototype;\n\n    USPProto.polyfill = true;\n\n    /**\n     *\n     * @param {function} callback\n     * @param {object} thisArg\n     */\n    USPProto.forEach = USPProto.forEach || function(callback, thisArg) {\n        var dict = parseToDict(this.toString());\n        Object.getOwnPropertyNames(dict).forEach(function(name) {\n            dict[name].forEach(function(value) {\n                callback.call(thisArg, value, name, this);\n            }, this);\n        }, this);\n    };\n\n    /**\n     * Sort all name-value pairs\n     */\n    USPProto.sort = USPProto.sort || function() {\n        var dict = parseToDict(this.toString()), keys = [], k, i, j;\n        for (k in dict) {\n            keys.push(k);\n        }\n        keys.sort();\n\n        for (i = 0; i < keys.length; i++) {\n            this['delete'](keys[i]);\n        }\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i], values = dict[key];\n            for (j = 0; j < values.length; j++) {\n                this.append(key, values[j]);\n            }\n        }\n    };\n\n    /**\n     * Returns an iterator allowing to go through all keys of\n     * the key/value pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.keys = USPProto.keys || function() {\n        var items = [];\n        this.forEach(function(item, name) {\n            items.push(name);\n        });\n        return makeIterator(items);\n    };\n\n    /**\n     * Returns an iterator allowing to go through all values of\n     * the key/value pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.values = USPProto.values || function() {\n        var items = [];\n        this.forEach(function(item) {\n            items.push(item);\n        });\n        return makeIterator(items);\n    };\n\n    /**\n     * Returns an iterator allowing to go through all key/value\n     * pairs contained in this object.\n     *\n     * @returns {function}\n     */\n    USPProto.entries = USPProto.entries || function() {\n        var items = [];\n        this.forEach(function(item, name) {\n            items.push([name, item]);\n        });\n        return makeIterator(items);\n    };\n\n\n    if (iterable) {\n        USPProto[self.Symbol.iterator] = USPProto[self.Symbol.iterator] || USPProto.entries;\n    }\n\n\n    function encode(str) {\n        var replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, function(match) {\n            return replace[match];\n        });\n    }\n\n    function decode(str) {\n        return str\n            .replace(/[ +]/g, '%20')\n            .replace(/(%[a-f0-9]{2})+/ig, function(match) {\n                return decodeURIComponent(match);\n            });\n    }\n\n    function makeIterator(arr) {\n        var iterator = {\n            next: function() {\n                var value = arr.shift();\n                return {done: value === undefined, value: value};\n            }\n        };\n\n        if (iterable) {\n            iterator[self.Symbol.iterator] = function() {\n                return iterator;\n            };\n        }\n\n        return iterator;\n    }\n\n    function parseToDict(search) {\n        var dict = {};\n\n        if (typeof search === \"object\") {\n            // if `search` is an array, treat it as a sequence\n            if (isArray(search)) {\n                for (var i = 0; i < search.length; i++) {\n                    var item = search[i];\n                    if (isArray(item) && item.length === 2) {\n                        appendTo(dict, item[0], item[1]);\n                    } else {\n                        throw new TypeError(\"Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements\");\n                    }\n                }\n\n            } else {\n                for (var key in search) {\n                    if (search.hasOwnProperty(key)) {\n                        appendTo(dict, key, search[key]);\n                    }\n                }\n            }\n\n        } else {\n            // remove first '?'\n            if (search.indexOf(\"?\") === 0) {\n                search = search.slice(1);\n            }\n\n            var pairs = search.split(\"&\");\n            for (var j = 0; j < pairs.length; j++) {\n                var value = pairs [j],\n                    index = value.indexOf('=');\n\n                if (-1 < index) {\n                    appendTo(dict, decode(value.slice(0, index)), decode(value.slice(index + 1)));\n\n                } else {\n                    if (value) {\n                        appendTo(dict, decode(value), '');\n                    }\n                }\n            }\n        }\n\n        return dict;\n    }\n\n    function appendTo(dict, name, value) {\n        var val = typeof value === 'string' ? value : (\n            value !== null && value !== undefined && typeof value.toString === 'function' ? value.toString() : JSON.stringify(value)\n        );\n\n        // #47 Prevent using `hasOwnProperty` as a property name\n        if (hasOwnProperty(dict, name)) {\n            dict[name].push(val);\n        } else {\n            dict[name] = [val];\n        }\n    }\n\n    function isArray(val) {\n        return !!val && '[object Array]' === Object.prototype.toString.call(val);\n    }\n\n    function hasOwnProperty(obj, prop) {\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n    }\n\n})(typeof global !== 'undefined' ? global : (typeof window !== 'undefined' ? window : globalThis)); // NOTE(zllovesuk): using globalThis is needed to polyfill goja runtime"],"names":["self","ampersandTest","nativeURLSearchParams","URLSearchParams","get","e","isSupportObjectConstructor","a","toString","decodesPlusesCorrectly","__URLSearchParams__","encodesAmpersandsCorrectly","append","prototype","URLSearchParamsPolyfill","iterable","Symbol","iterator","propValue","name","value","appendTo","this","dict","has","getAll","slice","hasOwnProperty","set","i","key","query","encode","length","push","join","Proxy","construct","target","args","Function","bind","Object","defineProperty","USPProto","polyfill","forEach","callback","thisArg","parseToDict","getOwnPropertyNames","call","sort","k","j","keys","values","items","item","makeIterator","entries","search","str","replace","encodeURIComponent","match","decode","decodeURIComponent","arr","next","shift","done","undefined","isArray","TypeError","indexOf","pairs","split","index","val","JSON","stringify","obj","prop","global","window","globalThis"],"mappings":"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"}